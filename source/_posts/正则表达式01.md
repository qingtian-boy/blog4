---
title: 正则表达式01
date: 2019-02-20 15:30:31
tags: 正则 js
---
**正则表达式**

# **第01讲 正则表达式简介**

## 1.1 **网站数据验证**

之前学PHP 在服务器端接收之后写逻辑代码验证数据的合法性合理性

![img](wps1A97.tmp.jpg) 

<!-- more -->
![img](wps1A98.tmp.jpg) 

![img](wps1A99.tmp.jpg) 

![img](wps1A9A.tmp.jpg) 

![img](wps1A9B.tmp.jpg) 

即使存在前端验证,后端也不能够松懈 非法用户可能会以各种手段,非法请求服务端脚本

## 1.2 **正则表达式是什么**

在20世纪40年代左右 有两个生物学家 研究神经元活动时 创建了正则表达式

 

Unix操作系统 把正则表达式整合到了 **文件搜索功能** 当中.

 

正则表达式主要的功能时匹配**字符串**中 复合规则的 **子串**.

 

正则的全称 Regular expression 规则表达式

​	正则是用来说明 **字符串的匹配规则**

## 1.3 **正则的应用场景**

部分屏蔽中奖者手机号 :136****6666 把手机号的第4~7位替换成*

关键字的屏蔽或替换: 政府 zf 北京 bj 不雅词汇替换成****

表单数据验证:

​	验证手机号码是否正确: 11位纯数字 136 130 159 号段要真实

​	邮箱: 格式是否正确 [*******@*******.cn](mailto:*******@*******.cn)

​	密码: 弱强度 高强度密码 至少含有一个大写字母、小写字母、数字

 

许多的正则需求,用原生JS是可以实现的,但是远远不如正则方便

 

 

 

 

 

 

# **第02讲 正则对象**

## 2.1 **创建正则对象**

JS中有名言: 万物皆对象

先实例化正则对象

 

系统中有个正则构造器 **RegExp(‘****正则表达式****’)**;

![img](wps1A9C.tmp.jpg) 

以字面量形式创建正则对象  /正则表达式/

![img](wps1A9D.tmp.jpg) 

 

 

 

 

 

 

## 2.2 **小试牛刀**

用原生JS实现需求 与 用正则实现需求

 

需求:验证手机号

① :验证手机号码中,是否含有字母a

![img](wps1A9E.tmp.jpg) 

![img](wps1A9F.tmp.jpg) 

② :检验手机号码中是否有字母 52大小写字母

![img](wps1AB0.tmp.jpg) 

![img](wps1AB1.tmp.jpg) 

 

③ :检验手机号中是否含有任何非数字字符

![img](wps1AB2.tmp.jpg) 

## 2.3 **正则相关6大方法(重点)**

正则用来表达 匹配字符串的规则

在匹配了字符串后进行 捕获、替换、分割等操作

**正则****.****test(字符串)**; 检测字符串中是否含有符合正则描述的子串 返回布尔值

**正则.exec****(****字符串****)** ; 捕获 字符串中符合正则描述的子串 返回数组(一个结果)

![img](wps1AB3.tmp.jpg) 

​	**字符串****.****match(正则)**; 捕获 字符串中符合正则描述的子串 返回数组(所有结果)

![img](wps1AB4.tmp.jpg) 

​	

 

 

 

 

 

 

​	**字符串****.****search****(正则****)**; 检测字符串中是否存在符合正则描述的**子串**

​		返回数值 返回子串首次出现的索引

如果没有符合要求的子串 返回-1

该方法与indexOf很像 search支持正则 indexOf不支持

![img](wps1AB5.tmp.jpg) 

​	**字符串****.****replace(****正则,****新字符串)**; 用新字符串替换所有符合正则描述的子串

![img](wps1AB6.tmp.jpg) 

​	**字符串****.****split(正则)**; 把符合正则描述的子串当做分隔符 把字符串切割成数组

![img](wps1AB7.tmp.jpg) 

## 2.4 **匹配模式**

/正则表达式/匹配模式

 

**g**: global 全局匹配 在字符串的所有位置进行匹配

i: ignore 忽略大小写 针对字母忽略大小写进行匹配

# **第03讲 正则表达式构成**

## **3.1** **普通字符与元字符**

​	学习正则有两个重要部分:

1、 记住正则相关的所有特殊符号的含义 死记硬背 多些正则

2、 要掌握一套分析需求 产生思路 构建正则表达式的工作方法 正则三问

 

在手机号中匹配字母a /a/ 这种就是普通字符 字符的含义与字面意义相同是普通字符

在手机号中匹配非数字 \D 这种就是元字符 字符的含义与字面意义不同是元字符

 

​	元字符:

​		**\d** : 数字

​		**\D**: 非数字

​		**\w**: word缩写 单词字符 a-z A-Z _ 0~9 大写字母、小写字母、下划线、数字

​		**\W**: 非单词字符

​		**\s**: space缩写 空白字符 空格、换行符、制表符tab 看不见但又存在的字符

​		**\S**: 非空白字符

 

除了这些元字符之外,还有许多具有特殊意义的符号:

​	()[]{} *+? ^$ 这些符号在正则中都有特殊含义

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

## **3.2** **查什么****(****匹配符****)**

​	正则就是在描述你要寻找怎样的字符串

查什么: 找出字符串的特征 并用正则表达出来

① : 匹配普通字符:  要查什么就写什么

![img](wps1AB8.tmp.jpg) 

② : 匹配字符串中的奇数数字: 用**[****]**构建范围类 [13579]

![img](wps1AB9.tmp.jpg) 

 

 

 

 

 

 

 

 

③ : 匹配所有数字: \d [0123456789] [0-9] **-**可以用于表达连续的范围

![img](wps1ABA.tmp.jpg) 

④ : 匹配偶数: [24680] [^13579] 在**[****]范围类**中**^**表示**取反**

![img](wps1ABB.tmp.jpg) 

 

 

⑤ : 匹配中文: 中文本身没有连续性 汉字的编码有连续性 **[\u4e00-\u9fa5]**

![img](wps1ABC.tmp.jpg) 

![img](wps1ABD.tmp.jpg) 

 

 

 

 

 

 

 

 

 

 

 

 

 

⑥ : 用匹配符,可以十分方便地描述字符串特征: 

​		**\d** : 数字   [0-9]

​		**\D**: 非数字  [^0-9]

​		**\w**: word缩写 单词字符 a-z A-Z _ 0~9 大写字母、小写字母、下划线、数字

​							[a-zA-Z_\d]

​		**\W**: 非单词字符 [^a-zA-Z_\d]

​		**\s**: space缩写 空白字符 空格、换行符、制表符tab 看不见但又存在的字符

​		**\S**: 非空白字符

​		**.**: 英文句点 任意字符

![img](wps1ABE.tmp.jpg) 

 

 

 

 

 

 

 

## 3.3 **查多少(限定符)** 

 查多少:  描述 特定字符的出现次数

① : 查连续4位数字:  **{}**构建量词 {4} 要查4次

**p****1:** **查什么:数字 查多少:****4****位**

![img](wps1ABF.tmp.jpg) 

​		构建正则的思路不同:

​		**p****1:** **查什么:数字\d** **查多少:****1****个**

​		**p****2:** **查什么:数字\d** **查多少:****1****个**

​		**p****3:** **查什么:数字\d** **查多少:****1****个**

​		**p****4:** **查什么:数字\d** **查多少:****1****个**

![img](wps1AD0.tmp.jpg) 

 

 

 

 

 

 

② : 匹配连续的3到6位数字  还是用{}构建量词 **{****x****,y****}**  {3,6}

**p****1:** **查什么:数字\d** **查多少:****3****~****6****位{****3,6}**

![img](wps1AD1.tmp.jpg) 

③ : 匹配至少4位连续数字 还是用{}构建量词 {4,}  

**p****1:****查什么:数字\d** **查多少:最少4个{****4,}**

![img](wps1AD2.tmp.jpg) 

 

 

 

 

 

 

 

 

 

 

 

 

④ : 贪婪模式与非贪婪模式:

![img](wps1AD3.tmp.jpg) 

​		在默认情况下,正则会尽可能以量词的上限来抓取尽可能长的数据,这种模式成为贪婪模式(饿汉模式)

​		有些情况下希望以尽可能小、尽可能短的方式来捕获数据,在**量词后面**添加一个**?**切换到非贪婪模式(饱汉模式)

![img](wps1AD4.tmp.jpg) 

 

 

 

 

 

 

 

 

⑤ : 用限定符(**量词**),可以十分方便地描述要匹配的字符数量: 

**{****x}**  要匹配X位

**{****x****,y}** 要匹配x~y位

**{x****,****}** 最少匹配x位 上限不限

**{****x,y}?** 非贪婪模式 相当于按照x位匹配

 

简易量词:

​	*****: 任意位 相当于{0,}

​	**+**: 至少一位 相当于{1,}

​	**?**: 0或1位 相当于{0,1}

![img](wps1AD5.tmp.jpg) 

​	***和****?**可能会以0位匹配字符 匹配结果中可能出现空值

 

​	任意量词的后面可以跟一个?切换到非贪婪模式,如:

​		**?****?** 

第一个问号是量词 表达匹配 0个或1个

第二个问号切换到非贪婪模式,表达按0个字符匹配

## 3.4 **在哪查(定位符)**

 在哪查: 特定子串在字符串中出现的位置描述 在字符串的开始 结尾 单词边界

① :匹配**表单**中的手机号码: 匹配连续11位数字

**p****1: 查什么：数字****\****d 查多少****:****11位**

![img](wps1AD6.tmp.jpg) 

​		^字符串的起始标记

![img](wps1AD7.tmp.jpg) 

​		$字符串的结束标记

![img](wps1AD8.tmp.jpg) 

​	捕获干净的手机号:

​         p1:查什么:字符串的起始标记^ 查多少:1个 在哪查:一开始

​		 p2:查什么:数字\d             查多少:11位 在哪查:紧跟p1

​		 p3:查什么:字符串的结束标记$ 查多少:1个 在哪查:紧跟p2

 

​		/^\d{11}$/gi

![img](wps1AD9.tmp.jpg) 

② :匹配一段英文字符串中的单词**a****n**     zhangsan has **an** apple

正则三问:

​	p1: 查什么:查空白字符\s 查多少:1个 在哪查:任意

​	p2: 查什么:an    查多少:1个 在哪查:紧跟p1

​	p3: 查什么:查空白字符\s 查多少:1个 在哪查:紧跟p2

 

/\san\s/gi

![img](wps1ADA.tmp.jpg) 

 

 

 

 

 

 

③ :匹配zhangsan姓名中的最后一个an 用\B表达非单词边界 \b单词边界

![img](wps1ADB.tmp.jpg) 

​		p1: 非单词边界 1个 任意

​		p2: an 紧跟p1

​		p3: 单词边界 紧跟p2

 

​	/\Ban\b/g

![img](wps1ADC.tmp.jpg) 

④ :需求中与特定位置相关的,一般用**定位符**来表达: 

**^** 字符串的起始标记

**$** 字符串的结束标记

**\B** 非单词边界 **字母**与**字母**之间的标记

**\****b** 单词边界 **字母**与空白字符之间的标记

 

所有的定位符不代表任何具体的字符 只代表一种位置关系

# **第04讲 分组技术**

​	如果遇到**相同**性质的需求,请务必想起分组/子表达式技术

## **4.1 定义分组(子表达式)**

​	需求:匹配连续4位**相同**数字 1111 6666

 

​	p1:查什么:数字\d      查多少:1位 在哪查:任意

​	p2:查什么:与p1**相同**   查多少:3位 在哪查:紧跟p1

 

​	/(\d)\1{3}/g

 

​	用(子表达式/分组) 先把圆括号中的结果保存起来 将来可以引用

![img](wps1ADD.tmp.jpg) 

 

 

 

 

 

 

 

 

 

 

 

 

## **4.****2** **分组捕获与反向引用**

![img](wps1ADE.tmp.jpg) 

​	需求: 匹配AABB模式的字符串 2233 开开心心

​		p1:查什么:任意字符 . 查多少:1个 在哪查:任意

​		p2:查什么:与p1相同 查多少:1个 在哪查:紧跟p1

​		p3: 任意字符 1个 跟着p2

​		p4: 与p3相同

 

​	/(.)\1(.)\2/g

![img](wps1ADF.tmp.jpg) 

​	在正则中的子表达式按从左到右顺序建立 从1开始的序号

​	反向引用时 \序号 可以引用出子表达式的结果。

 

 

 

 

 

 

 

 

## **4.****3** **替换引用**

​	手机号码的部分屏蔽 : 13600556677  136****6677

​		p1:查什么:数字 查多少:3个

​		p2:查什么:数字 查多少:4个

​		p3:查什么:数字 查多少:4个

 

​	/(\d{3})\d{4}(\d{4})/g

 

​	替换成: p1****p3

![img](wps1AEF.tmp.jpg)	在替换时,在str.replace方法中传参(), 反向引用 **$****序号**;

![img](wps1AF0.tmp.jpg) 

![img](wps1AF1.tmp.jpg) 

## **4.****4** **相关需求演练**

​	需求1：匹配AABB形式的字符串 1122 开开心心

 

​	需求2：匹配HTML双标签

​		<div>内容</div>

.		<h1></h1>

| 部分序号 | 查什么             | 查多少  | 在哪查 |
| -------- | ------------------ | ------- | ------ |
| p1       | <                  | 1       | 任意   |
| p2       | 字母数字 ([a-z\d]) | 任意个* | 紧跟p1 |
| p3       | >                  | 1       | 紧跟p2 |
| p4       | 任意字符 .         | 任意个* | 紧跟p3 |
| p5       | <                  | 1       | 紧跟p4 |
| p6       | \/                 | 1       | 紧跟p5 |
| p7       | 与p2相同 \1        | 1       | 紧跟p6 |
| p8       | >                  | 1       | 紧跟p7 |

 

​	/<([a-z\d]*)>.*<\/\1>/g

![img](wps1AF2.tmp.jpg) 

 

 

 

 

​	需求3：匹配 12112模式 ABAAB模式的字符串

​		/(.)(.)\1{2}\2/g

![img](wps1AF3.tmp.jpg) 

# **第05讲 选择技术**

​	遇到或者性质的需求,联想到选择匹配符 **|**

## **5.1 选择匹配符**

​	需求:匹配 helloPHP 或者 helloJavaScript

​	

​	p1:查什么: helloPHP 或者 helloJavaScript

 

​	/helloPHP|helloJavaScript/g

![img](wps1AF4.tmp.jpg) 

 

 

## **5.2 选择匹配符模拟范围类**

​	捕获小写字母a或b或c

 

​	/[abc]/

​	/[a-c]/

​	/a|b|c/

![img](wps1AF5.tmp.jpg) 

## **5.****3** **选择匹配符结合子表达式**

​	捕获helloPHP或helloJavaScript

 

​	p1:查什么: hello 

​	p2:查什么:查 php或JavaScript

 

​	/hello(php|javascript)/g

![img](wps1AF6.tmp.jpg) 

​	有时可以利用子表达式来保证一个部分的独立性

# **第06讲 预查技术**

## **6.1** **前瞻与后顾**

![img](wps1AF7.tmp.jpg) 

正则是一个独立技术 在很多程序语言中都获得支持

在JS中 **不支持后顾** ,其他语言如PHP是支持后顾

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

## **6.2** **正向预查(就是前瞻****)**

​	需求:匹配在PHP左边出现的三个数字

 

​	p1:查什么:数字\d 查多少:3位 在哪查:任意

​	p2:查什么:查PHP但是不捕获php (?=php)

 

​	预查的正则语法: /(?=要预查的字符)/  查字符但是又不捕获

 

​	/\d{3}(?=php)/gi

![img](wps1AF8.tmp.jpg) 

![img](wps1AF9.tmp.jpg) 

 

 

 

 

 

 

 

 

 

## **6.3** **负向预查(不是后顾)**

​	需求:匹配**不在**PHP左边出现的三个数字

 

​	p1:数字 3位

​	p2:除了PHP出现预兆之外的位置标记

 

​	负向预查正则语法: (?!要匹配的字符) 查出右侧不是目标字符的位置

![img](wps1AFA.tmp.jpg) 

![img](wps1AFB.tmp.jpg) 

 

 

 

 

 

 

 

 

 

## **6.****4** **预查捕获**

需求:捕获php左边的三位数字,并且把php字样本身也捕获出来

 

方法一:

​	p1:数字 3位

​	p2:php

 

​	/\d{3}php/

 

方法二; 预查技术

​	p1:数字 3位

​	p2:查php出现的预兆

​	p3:任意字符 3位

 

​	/\d{3}(?=php).{3}/

![img](wps1AFC.tmp.jpg) 

​	预查捕获的正则语法: **(****?:要预查的字符)**

 

​	/\d{3}(?:php)/

![img](wps1AFD.tmp.jpg) 

## **6.5** **选择性预查**

​	需求:捕获php**或者**JavaScript字样左边的3位数字

 

​	p1: 三位数字

​	p2: 查 php或JavaScript出现的预兆 (?=php|javascript)

 

​	/\d{3}(?=php|javascript)/g

![img](wps1B0E.tmp.jpg) 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

## **6.6** **多条件预查(重难点****)**

​	需求1：匹配一个含有小写字母a的字符串 *********a***********

​		p1:任意字符 任意个

​		p2: a

​		p3:任意字符 任意个

 

​		/.*a.*/g

![img](wps1B0F.tmp.jpg) 

 

​	*********a*********** 如果一个字符串含有a 那么它一定含有*********a

 

​	需求2: 如何证明一个字符串中含有a 证明字符串中会出现 *********a

​		p1:查*********a 出现的预兆

​		p2:任意字符任意个

 

​		/(?=.*a)/

![img](wps1B10.tmp.jpg) 

 

 

 

​	需求3: 要求字符串中必须同时存在至少一个小写字母一个大写字母

​		***************a

​		**********A

​		p1:查小写字母出现的预兆

​		p2:查大写字母出现的预兆

 

​		/(?=.*a) (?=.*A)/

 

​		p1:字符串起始标记 ^

​		p2:查小写字母出现的预兆

​		p3:查大写字母出现的预兆

![img](wps1B11.tmp.jpg) 

需求4：强密码验证,要求密码中必须包含小写字母,大写字母和数字 长度6~12

​		p1: 查什么: 字符串的起始标记^ 

​		p2: 查小写字母出现的预兆 如果查到说明字符串中一定含有小写字母

​		p3: 查大写字母出现的预兆 如果查到说明字符串中一定含有大写字母

​		p4: 查数字出现的预兆 如果查到说明字符串中一定含有数字

​		p5: 查任意字符 6~12位

​		p6: 查字符串的结束标记 $

 

​	/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/ 这4个部分能确保字符串中含有大小写字母和数字

![img](wps1B12.tmp.jpg) 

​	/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,12}$/g 在上述标记之后捕获6~12位密码内容

![img](wps1B13.tmp.jpg) 

​	/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,12}$/g

​	字符串的起始标记 数字出现的预兆 大写字母出现的预兆 小写字母出现的预兆 密码

 

​	这4个标记的顺序并不重要,没有捕获任何实际字符 只是逻辑限制

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

# **第07讲 exec****()****方法高级用法**

## **7.1 exec结合while使用**

​	exec方法与match方法的差别

​	exec每次调用只返回一个结果(数组)

![img](wps1B14.tmp.jpg) 

​	小心死循环 循环中使用exec一定要加上g模式 确保循环能够结束

## **7.2 exec结合子表达式使用**

![img](wps1B15.tmp.jpg) 

# **训练案例:**

​	准备自己的离线正则工具箱:

 

​	可以用课前材料中提供的版本

​	网上有很多在线版本

![img](wps1B16.tmp.jpg) 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

# **课后作业**

​	1、用正则技术,验证用户的手机号、邮箱、账号、密码

​		邮箱:按照正常的邮箱格式 [zhangsan@163.com](mailto:zhangsan@163.com) [888888@qq.com](mailto:888888@qq.com)等

​			[某些字符@邮箱服务器.cn](mailto:某些字符@邮箱服务器.cn)

 

​		![img](wps1B17.tmp.jpg)

​		

​		p1:查什么:\w- 查多少:至少1个 在哪查:任意

​		p2:查什么:@

​		p3:查什么:\w 查多少: 至少1个

​		p4:查什么: \.[a-z]+ 查多少:1~2个

 

​		/[\w-][+@\w+(\.[a-z\]+){1,2}/](mailto:+@\w+(\.%5ba-z%5d+)%7b1,2%7d/)

​		根据需求的不同表达式很可能不同 上述表达式仅供参考

![img](wps1B18.tmp.jpg) 

 

​		密码:6~12位必须有且只有大小写英文字母和数字

不看笔记自己搭建出正则三问 写出表达式

 

 

 

 

 

 

 

 

​	2、用正则捕获IP地址:

​		列举样本数据: 192.168.0.0 每段数字范围0~255

 

​		127.0.0.1

​		192.168.0.1

​		255.255.255.255

​		0.0.0.0

 

​		0~255如何用正则表达 拆分成几个数值范围

​		

​		0-9      \d

​		10-99    [1-9]\d

​		100-199  1\d\d

​		200-249  2[0-4]\d

​		255      25[0-5]

 

​		正则不考虑多位数的大小 正则必须一位一位描述字符串特征

![img](wps1B19.tmp.jpg) 

​	数字 .数字

​	/(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}/g

![img](wps1B1A.tmp.jpg) 
