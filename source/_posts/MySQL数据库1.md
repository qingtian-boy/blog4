---
title: MySQL数据库1
date: 2019-02-20 17:00:06
tags: MySQL
---
# 知识补充

### 匿名函数

概念：匿名函数指的就是没有名的函数。

**==演示案例==**：

![1538960917819](3)

<!-- more -->

**==小结==**：

1. 匿名函数是没有名字的函数
2. 匿名函数的结构一定要以语句结束符分号结尾，否则将直接报致命的错误
3. 调用匿名函数的方式是直接指定保存匿名函数的变量加上小括号，有参数就传参数



**==细节1==**：区别于普通函数，匿名函数是在执行阶段才被确定的。

![1538961518512](4)



**==细节2==**：匿名函数是基于Closure系统类创建出来的对象。

![1538961623110](5)



**==细节3==**：还可以使用create_function函数创建匿名函数。

![1538961957608](6)



### 常见的算法思想

斐波那契数列：第一个值和第二个值都是1，从第三个值开始，以后每一个值都是前面两个值之和

1 1 2 3 5 8 13 21 34 55….

1）递归思想； 

求斐波那契数列第10个数的值？



#### 递归思想

在程序中，指的就是通过调用==自己==来完成业务逻辑。在递归思想中，我们可以==把最终问题看成是最大问题==，我们可以想办法==将大问题拆解为小问题==，直到拆解到我们已知的条件上去。



递归思想的解决方式有一句通俗的描述：即==自己调用自己==。



**==实现代码==**：

```php
/*

斐波那契数列
1   1   2   3   5   8   13   21   34    55....

*/

function recursive($n){ //求第$n项的值
    
    if( $n==1 || $n==2 ){//当$n为1的时候，应该返回1
        return 1;
    }

    //求第$n项的值，$n>=3
    /*
    $n      return
    3         recursive(2)+recursive(1)
    4         recursive(3)+recursive(2)
    5         recursive(4)+recursive(3)
    */
    return recursive($n-1)+recursive($n-2);
}

$re = recursive(10);//求第10项的值
var_dump( $re ); 
```



### 两个必备函数介绍：time和date函数

时间戳：表示UTC时间从1970年1月1日0时0分0秒开始一直到当前时间的==秒数差==。



==time函数演示案例==：time函数返回的是一个时间戳。

![1538964815784](7)

==date函数演示案例==：将时间戳转换为指定的时间日期格式类型数据。

![1538965092900](8)

# 一、昨日回顾

## 1. 知识回顾

1. 能够理解通常的错误分类概念

   分类：1）系统触发；2）用户触发；

2. 能够说出3-5个错误代号

   E_NOTICE、E_WARNING、E_ERROR

   E_USER_NOTICE、E_USER_WARNING、E_USER_ERROR

3. 能够人为触发一个错误

   使用trigger_error的函数，可以触发一个人为的错误；

4. 能够设置显示错误信息以及记录错误日志，能够理解自定义错误处理机制

   ```php
   //负责控制有哪些级别的错误需要报告，E_ALL表示所有的错误都需要报告
   ini_set('error_reporting', E_ALL);
   
   //负责控制是否显示出现的错误的错误信息，Off表示关闭显示错误，On表示开启显示错误
   ini_set('display_errors', 'Off');
   
   //负责控制记录错误的文件其全路径地址的
   ini_set('error_log', 'F:/xx/xxx/x.log');
   
   //负责控制是否开启记录错误到日志文件中的，1表示开启记录，0表示关闭记录
   ini_set('log_errors', 1);
   ```

   

5. 能够运用函数基本语法

   ```php
   function 函数名(){
       
       函数结构体
   }
   ```

   

6. 能够解释形参和实参的概念

   形参： 定义函数时所指定的参数；

   实参： 调用函数时传递给函数的参数；

7. 能够解释静态变量的含义

   在函数中通过static关键字定义出来的像变量一样的内容就是静态变量；

8. 能够解释变量作用域的含义

   包括：1）局部作用域；2）全局作用域；

   局部作用域：  我们可以基本的理解为就是函数体中的空间；

   全局作用域： 函数体外部的空间都叫做全局作用域；





# 二、知识路径

- MYSQL基本介绍

  ​	为什么使用MYSQL数据库

  ​	什么是MYSQL数据库

  ​	windows中启动与停止MYSQL服务

  ​	登陆与退出MYSQL

  ==目标：能够掌握启动和停止MYSQL服务；能够掌握登陆和退出MYSQL==

- MYSQL基本操作

  ​	数据库相关操作

  ​	数据表相关操作

  ​	数据的基本操作

  ==目标：能够掌握对数据库，数据表和数据的基本操作==




# 三、今日课程内容：MYSQL数据库

## 1. MYSQL基本介绍

### 为什么使用MYSQL数据库

我们的生活当中，很多地方都离不开数据库，银行，大学，图书馆等就是几个严重依赖数据库系统的地方。在互联网中，使用的搜索引擎，访问的绝大部分网站也都离不开数据库。而MYSQL数据库是众多数据库中比较出类拔萃的一种。总体而言，MYSQL数据库有如下一些主要优点：

> 1)    执行速度快，MYSQL是市面上执行SQL速度最快的SQL软件之一；
>
> 2)    并发处理能力好，理论上可以同时处理几乎不限数量的用户；
>
> 3)    存储能力强，可以处理多达50000000以上的记录；
>
> 4)    对商业和个人用户均开源并且免费；



### 什么是MYSQL数据库

LOGO：

![img](./1.png)

MySQL是一种开放源代码的==关系型==数据库管理系统（RDBMS），MySQL数据库系统使用最常用的数据库管理语言--==结构化查询语言==（SQL）进行数据库管理。 



SQL：==Structure Query Language==  意思是 ==结构化查询语言==



由于MySQL是开放源代码的，因此任何人都可以在General Public License的许可下下载并根据个性化的需要对其进行修改。MySQL因为其速度、可靠性和适应性而备受关注。大多数人都认为在不需要事务化处理的情况下，MySQL是管理内容最好的选择。 



MySQL这个名字，起源不是很明确。一个比较有影响的说法是，基本指南和大量的库和工具带有前缀“my”已经有10年以上，而且不管怎样，MySQL AB创始人之一的Monty Widenius的女儿也叫My。这两个到底是哪一个给出了MySQL这个名字至今依然是个迷，包括开发者在内也不知道。



MySQL的海豚标志的名字叫“sakila”，它是由MySQL AB的创始人从用户在“海豚命名”的竞赛中建议的大量的名字表中选出的。获胜的名字是由来自非洲斯威士兰的开源软件开发者Ambrose Twebaze提供。根据Ambrose所说，Sakila来自一种叫SiSwati的斯威士兰方言，也是在Ambrose的家乡乌干达附近的坦桑尼亚的Arusha的一个小镇的名字。



#### 数据库的分类

数据库通常分为==层次式数据库==、==网络式数据库==和==关系式数据库==**三种**。

而不同的数据库是按不同的数据结构来联系和组织的。在当今的互联网中，最常见的数据库模型主要是两种，即==**关系型数据库**==和==**非关系型数据库**==。



MYSQL数据库是==关系型数据库==模型的典型代表。



#### MYSQL的发展历程

> MySQL的历史最早可以追溯到**1979年**，
>
> 
>
> 那时Oracle也才小打小闹，微软的SQL Server影子都没有。Monty Widenius在其合伙的TcX小公司工作时，用BASIC设计了一个报表工具。随着时间的推移，这个小工具被用C重写并迁移到Unix上运行。当时，它只是一个很底层的面向报表的存储引擎，再配上一个报表前端。它就是大家知道的Unireg。
>
> 
>
> **1990年**，Monty因为不满访问数据的SQL接口的速度，决心自己重写一个SQL。
>
> 
>
> 该公司的客户急切要求访问其数据的SQL接口，TcX提出其中一方案是把数据都加载进一个商用数据库。但Monty对这个方案的执行速度并不满意。他尝试将mSQL的代码用做SQL层，并用自己的低层级的存储引擎集成进来，但效果也不好。于是, Monty决心自己重写一个SQL。
>
> 
>
> **1996年，MySQL 1.0发布**。
>
> 
>
> 同年10月，MySQL 3.11.1发布，只提供了Solaris下的二进制版本。一个月后，Linux二进制包也发布。 此时的MySQL还非常简陋，除了在一个表上做一些Insert，Update，Delete和Select 操作，没有其他更多的功能。 
>
> 接下来的两年里，MySQL依次移植到各个平台下。它发布时，采用的许可策略，有些与众不同：允许免费商用，但是不能将MySQL与自己的产品绑定在一起发布。如果想一起发布，就必须使用特殊许可，意味着要花银子。
>
> MySQL3.22应该是一个标志性的版本，提供了基本的SQL支持。还带有一个复杂的优化器，新版本速度很快，且非常稳定。尽管如此，它还是不支持事务、子查询、外键、存储过程和视图，只存在表级别的锁。
>
> 
>
> **1999-2000**，一个名叫MySQL AB的独立公司成立了（Monty Widenius也作为创始人之一）
>
> 
>
> 它聘请了几位开发者并与Sleepycat公司建立合作伙伴关系，提供访问Berkeley DB数据文件的SQL接口。自从Berkeley DB具备事务功能之后，它就赋于了MySQL支持事务的特质，补上了它的短板。在为集成的Berkeley DB做了一些修改之后，MySQL 3.23发布了。
>
> 
>
> **2000 年，MySQL 公布了自己的源代码，并采用GPL（GNU General Public License）许可协议，正式进入开源世界。** 
>
> 
>
> **2004年10月MySQL 4.1发布，2005年10月发布里程碑的一个版本 5.0。**
>
> 
>
> 在5.0 之后的版本里，MySQL明确地表现出迈向高性能数据库的发展步伐。5.1版本紧随其后，其中加了好多的新的改进，如表分区（table data partitioning），基于行的复制（row-based replication）,事件调度器（event schedular），和让新存储引擎和其它插件轻松集成的标准化插件API。
>
> 
>
> **2008年1月16号 Sun公司收购MySQL。**
>
> 
>
> **2009年4月20，Oracle收购Sun公司。**



### windows中启动与停止MYSQL服务

#### 命令行方式

启动MYSQL服务：==net start mysql==

关闭MYSQL服务：==net stop mysql==

**==操作演示==**：

![1538968129431](9)

![1538968148793](10)



#### 系统服务方式

**==操作演示==**：

第一步，打开WINDOWS下的系统服务界面，

![1538968269455](11)

![1538968294581](12)

第二步，找到MYSQL服务，进行相关管理，

右键点击MYSQL服务名称，可以进行管理操作

![1538968327118](13)



### 登陆与退出MYSQL

登陆MYSQL语句语法：==mysql  –u用户名  \[-h服务器IP地址\]  [-P端口]  -p密码==

**==操作演示==**：

![1538968647228](14)

不在指令后面跟上密码的方式：

![1538968765427](15)



退出MYSQL语句语法1：==exit==

退出MYSQL语句语法2：==quit==

退出MYSQL语句语法3：==\q==

**==操作演示==**：

![1538968796258](16)



## 2. MYSQL基本操作

TIPS：MYSQL的基本操作分为1）对数据库的操作；2）对数据表的操作；3）对数据表中保存的数据的操作；



### 数据库相关操作

#### 显示所有数据库

语句语法：==show databases;== 

**==操作演示==**：

![1538968943604](17)



#### 创建数据库

语句语法：==create database 数据库名;== 

**==操作演示==**：

![1538969127207](18)



#### 删除数据库

语句语法：==drop database 数据库名;==

**==操作演示==**：

![1538969241863](19)



另一种删除数据库的语句语法：==drop database if exists 数据库;== 

**==操作演示==**：删除的同时会判断该数据库是否存在，存在则删除，不存在则不做任何操作。

![1538969338497](20)



#### 选择数据库

选择数据库的操作，就相当于先进入到某个仓库的操作。

语句语法：==use 数据库名;==

**==操作演示==**：相当于进入一个数据仓库。

![1538969512400](21)



### 数据表相关操作

#### 显示所有数据表

语句语法1：==show tables;== 

**==操作演示1==**：

![1538969840154](22)



如果正常情况没有选择数据库，则show tables将会报错：

![1538969940215](23)



语句语法2：==show tables in 数据库名;==

表示查看某个指定的数据库中的所有的表。

**==注意==**：1）这个操作不用预先选择某个数据库；2）这个操作也不会切换数据库； 

**==操作演示2==**：

![1538970186526](24)



#### 创建数据表

TIPS：其实在MYSQL中创建一个数据表，就相当于在excel表中定义了一个表的表头。

语句语法：

```mysql
create table 表名(
字段1名  字段1数据类型  [字段1属性],
字段2名  字段2数据类型  [字段2属性],
字段n名  字段n数据类型  [字段n属性]
);
```



**==需求==**：创建一个如下条件的数据表：

```mysql
学生表
stu
学生姓名,学生年龄
name,age
```

**==解答==**：

![1538970834654](25)



#### 删除数据表

语句语法：==drop table 表名;== 

**==操作演示1==**：

![1538970925285](26)



另一种删除表的语句语法：==drop table if exists 表名;== 

**==操作演示2==**：

![1538970952104](27)



#### 显示表结构

语句语法：==describe 表名;== 

**==操作演示==**：

![1538982534903](28)



简写语法：==desc 表名;==

**==操作演示==**：

![1538982610873](29)



#### 显示建表语句

语句语法：==show create table 表名;== 

**==操作演示==**：

![1538982742447](30)



更加良好的格式展示 ：==show create table 表名\G==

**==操作演示==**：

![1538982932277](31)



==细节1==：一般情况下MYSQL中不能使用关键字作为表的字段名或表名。

![1538983070631](32)



==细节2==：反引号“`”包裹的字段名或表名将只会被MYSQL当成普通字符来处理。

![1538983283888](33)



#### 设置表属性

TIPS：建表时我们可以单独为所建的表设定属性。



**==操作演示==**：

![1538983760330](34)



==拓展知识==：查看表属性语句：==show table status like ‘表名’;==

**==操作演示==**：

![1538984210222](35)



#### InnoDB和MyISAM引擎的区别

两种引擎之间的区别挺多的，但是，最主要的区别是：

1）  通常InnoDB引擎使用的是==行级锁==；MyISAM引擎使用的是==表级锁==。（非绝对）

2）  InnoDB引擎支持==外键==，MyISAM引擎不支持。

3）  InnoDB引擎支持==事务==，MyISAM引擎不支持。



#### 修改表属性

语句语法：==alter table 表名 属性名=新属性值;== 

**==操作演示==**：

![1538985774386](36)



#### 修改表名

语句语法：==rename table [库名.]旧表名 to [库名.]新表名;== 

**==操作演示==**：

![1538985893097](37)



==细节==：rename语句的另外一个作用，可以转移一个表到指定的库中。 

**==操作演示==**：

![1538986154923](38)



#### 数据表操作总结

1. 显示所有数据表：

   show tables;    显示当前所在数据库下的所有数据表

   show tables in 库名;      显示指定的某个数据库中的所有数据表

2. 创建数据表：

   ```mysql
   create table 表名(
   字段1 字段1数据类型,
   字段2 字段2数据类型,
   字段n 字段n数据类型
   );
   ```

3. 删除数据表：drop table 表名;

4. 显示表结构：desc 表名;

5. 显示建表语句：show create table 表名\G

6. 设置表属性：

   ```mysql
   create table 表名(
   字段1 字段1数据类型,
   字段2 字段2数据类型,
   字段n 字段n数据类型
   )engine=引擎 charset=字符集;
   ```

7. 查看表属性：show table status like '表名';

8. 修改表属性：alter table 表名 属性名=新属性值;

9. 修改表名（只针对当前所在的数据库修改表名）：rename table 旧表名 to 新表名;

   转移数据表到指定的数据库中：rename table 库名.旧表名 to 库名.新表名;



### 数据的基本操作

TIPS：对数据的基本操作就是增删改查操作。



#### 新增数据（insert语句）

语句语法： ==insert into 表名 (字段1, 字段2, … 字段n)  values  (字段1值, 字段2值, … 字段n值);== 

**==操作演示==**：

![1538987047181](39)



简洁的新增语句语法： ==insert into 表名 values (字段1值, 字段2值, … 字段n值);==

**==注意==**：使用这种方式新增数据，则数据表中有几个字段，那么新增的数据就必须一 一为==所有的字段==依次指定数据值。

**==操作演示==**：

![1538987289639](40)



#### 查询数据（select语句）

语句语法：==select  字段列表  from  [库名.]表名  [where 查询条件];==

**==操作演示==**：

![1538987571012](41)



**==细节1==**：如果不给where条件语句，则相当于指定条件为==where 1==，表示查询表中的所有数据，where 1条件的意思是恒为真。

![1538988022700](42)



**==细节2==**：如果字段列表被指定为“*”，则表示需要查询所有字段的数据。

![1538988136769](43)



#### 更新数据（update语句）

语句语法：==**update**  表名  **set**  字段1=字段1新值, 字段2=字段2新值, …. 字段n=字段n新值  **where** 条件语句;== 

**==操作演示==**：

![1538989136790](44)



**==注意==**：请务必给更新语句指定精准的条件，如果不指定条件，那么，将会把数据表中所有行的数据都改掉。

![1538989401618](45)



#### 删除数据（delete语句）

语句语法：==**delete from** 表名 **where** 条件语句;==

**==操作演示==**：

![1538989515300](46)

### 字符集设置

#### 查看MYSQL中的字符集

查看MYSQL支持的所有字符集：==show charset;== 

**==操作演示==**：





#### 字符集的概念

TIPS：字符集顾名思义就是==字符的集合==。 

字符集包括：1）字符的集合 2）字符的编码



> 世界上有非常多种类的文字，而不同的文字又有不同的字符所组成，比如英文有26个英文字母（字符），英文单词就是由这26个英文字母（字符）所组成。人们为了能够在电脑中展示出英文文字，就固定用一些值来表示这些英文字母（字符），打个比方，就好比我用0000 0001表示a，0000 0002表示b，将这些英文字母编排成一个字符的集合，取名为ASSIC码字符集。
>
>  
>
> 但是英文字母（字符）又分大小写，并且英文中除了单词还有一些符号，比如英文的逗号，冒号，分号等，于是又将这些字符全部编排进ASSIC码字符集，我们现在所使用的ASSIC码其实就是这些字符的集合。
>
>  
>
> 而最终，英文单词就是由这些字符组合而成！



#### 常用的字符集介绍

ASCII码  ==》 ASCII码扩展表  ==》 latin1 (包括ASCII码原表和ASCII码扩展表)

GB2312（不到8000）占2个字节  ==》gbk  （2个字节） ==》GB18030

unicode编码（占4个字节）==》 UTF-32 (占4个字节) ==》UTF-16(占2个字节) ==》UTF-8 (变长字节)



#### MYSQL中的字符集设置

在MYSQL中，我们重点需要掌握三个部分的字符集设置（这三个字符集属性可以单独进行设置）

查看语句：==show variables like 'character_set_%';==

**==目标展示==**：





**==操作案例1==**：character_set_client测试



为什么上面的操作中文就报错了呢?





解决办法：

设置的语句语法：==**set character_set_client=gbk;**==



**==操作案例2==**：character_set_results测试



为什么查询中的数据会乱码呢？





解决方法：

设置方法：**==set character_set_results=gbk;==**





**==小结1==**：





一次性设置三个字符集：==set names 目标字符集;==

**==操作演示==**：





**==小结2==**：





## 3. 全天总结

1. 数据库的操作

   显示所有的数据库：show databases;

   创建数据库操作：create database 库名;

   删除数据库操作：drop database 库名;

   选择数据库：use 库名;

2. 数据表的操作

   显示所有数据表：

   1） show tables;      显示当前所在的数据库下所有的表

   2） show tables in 库名;      显示指定的数据库中的所有表

   创建数据表：

   ```mysql
   create table 表名(
   字段1 字段1数据类型,
   字段2 字段2数据类型,
   字段n 字段n数据类型
   );
   ```

   删除数据表：drop table 表名;

   显示表结构：desc 表名;

   显示建表语句：show create table 表名\G

   设置表属性：

   ```mysql
   create table 表名(
   字段1 字段1数据类型,
   字段2 字段2数据类型,
   字段n 字段n数据类型
   )engine=引擎 charset=字符集;
   ```

   修改表属性：alter table 表名 属性名=属性新值;

   查看表属性：show table status like '表名';

   修改表名：

   1） rename table 旧表名 to 新表名;       修改当前数据库中某个表的表名

   2）rename table 库名.旧表名 to 库名.新表名;       转移某个数据表到一个新的数据库中，同时支持重命名新的表名

3. 数据的操作

   增：

   1) insert into 表名 (字段1, 字段2, ... 字段n) values (字段1值, 字段2值, ... 字段n值);

   2) insert into 表名 values (字段1值, 字段2值, ... 字段n值);       这种方式需要为数据表里所有的字段一一去指定新增的值

   删：delete from 表名 where 条件语句;

   改：update 表名 set 字段1名=字段1新值, 字段2名=字段2新值, .... 字段n名=字段n新值 where 条件语句;

   查：select 字段列表 from 表名 [where 条件语句];   条件语句如果不写，默认就是where 1条件，表示恒为真







  


