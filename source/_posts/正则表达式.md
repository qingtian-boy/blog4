---
title: 正则表达式
date: 2019-02-20 14:40:38
tags: 正则 JS
---
# **正则**表达式


# **学习****目标**

了解什么是正则表达式

掌握正则对象

掌握几个重要的概念（子表达式、捕获、反向引用）

掌握编写简单的正则表达式

# **一****、****什么****是正则表达式**
<!-- more -->
## **1、****什么是正则表达式**

正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出符合某个条件的子串等。

## **2、正则****表达式的****应用****场景**

数据隐藏（188****520 王先生）

数据采集（数据爬虫）

数据过滤（论坛敏感词过滤）

数据验证（表单验证、手机号码、邮箱地址...）

## **3、****快速入门**

例1：查找一个字符串是否含有数字8

![img](wpsD476.tmp.jpg) 

例2：查找一个字符串中是否含有数字

![img](wpsD487.tmp.jpg) 

# **二****、****正则****对象****（重点）**

## **1、为什么****需要正则对象**

使用正则表达式必须有一个前提：首先要创建一个正则对象（RegExp类对象）。

## **2、创建****正则对象**

① 隐式创建

var reg = /正则表达式/匹配模式;

② 显示创建（直接实例化）

var reg = new RegExp(‘正则表达式’, ‘匹配模式’);

 

例：判断一个字符串中是否含有3个连续的数字

![img](wpsD488.tmp.jpg) 

## **3、匹配****模式**

赋予正则表达式的匹配关系：

g ：global缩写，全局搜索，把字符串中满足正则的结果全部匹配。

i ：ignore缩写，忽略大小写，在使用正则匹配字符串时，会忽略大小写情况。

# **三****、****正则****相关的几个方法****（重点）**

## **1、RegExp****类下的方法**

**test****(str)** ：判断字符串中是否具有指定模式的子串，返回结果是一个布尔类型的值; **exec****(str)** ：返回字符串中指定模式的子串，一次只能获取一个与之匹配的结果;

 

var  str  =  ‘abc567defg’;

var  reg  =  /\d\d\d/gi;

reg.test(str)

reg.exec(str)

 

demo04_RegExp.html 示例代码：

![img](wpsD489.tmp.jpg) 

特别注意：当我们在一个页面中进行多次匹配时，一定要注意正则的指针问题。

demo05_RegExp.html 示例代码：

![img](wpsD48A.tmp.jpg) 

特别说明：exec方法是几个方法中最特殊的一个，默认情况下，一次只能匹配一个结果，然后指针也会随之改变。所以如果想匹配所有结果，必须与while循环结合使用。

## **2、String****类下的****方法str.方法()**

**search(reg)** ：与indexOf非常类似，返回指定模式的子串在字符串首次出现的位置

**match(reg)** 重点：以数组的形式返回指定模式的字符串，可以返回所有匹配的结果 

**replace(reg,’替换后的字符’)** ：把指定模式的子串进行替换操作 

**split(reg)** ：以指定模式分割字符串，返回结果为数组ab12cd34ef

demo06_string.html 示例代码：

![img](wpsD48B.tmp.jpg) 

![img](wpsD48C.tmp.jpg) 

# **四****、****几个****重要的概念****（重点）**

## **1、****提出问题**

var  str  =  ‘ab1122cde3344fg5678’;

使用正则表达式，把这种1122、3344这样的字符匹配出来

## **2、几个****重要的概念**

① 子表达式

在正则表达式中，通过一对圆括号括起来的内容，就称之为会“子表达式”。

var  reg  =  /(\d)\d(\d)\d/gi;

 

② 捕获

当子表达式匹配到相应的内容后，系统会自动把匹配的结果放入系统的缓存区中。

![img](wpsD48D.tmp.jpg) 

 

③ 反向引用

在正则表达式中，我们可以使用\n（n代表缓冲区的编号，默认大于等于1）来引用缓存区中的内容。

![img](wpsD48E.tmp.jpg) 

## **3、思考题**

例1：查找数字，如：1221,3443

var  reg =  /(\d)(\d)\2\1/gi;

例2：如：查找字符，如：AABB,TTMM，提示[A-Z]

var  reg =  /([A-Z])\1([A-Z])\2/g;

例3：查找连续相同的四个数字或四个字符[0-9a-z]

![img](wpsD48F.tmp.jpg) 

# **五****、****编写****正则表达式****（重点****中的重点****）**

## **1、****正则表达式的组成**

正则表达式是由普通字符（例如字符 a 到 z）以及特殊字符（称为元字符）组成的文字模式。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。

## **2、正则表达式****三步走**

① 匹配符（查什么） ② 限定符（查多少） ③ 定位符（从哪查）

## **3、匹配符（查什么）**

① 字符簇

在正则表达式中，通过一对中括号括起来的内容就称之为“字符簇”。字符簇本身代表一个范围，但是其默认情况下只能匹配这个范围内的任一字符。

![img](wpsD490.tmp.jpg) 

② 元字符

![img](wpsD491.tmp.jpg) 

③ 脱字节(shift + 6 = ^)在字符簇中代表取反操作

![img](wpsD492.tmp.jpg) 

demo10_pipei.html 示例代码：

![img](wpsD493.tmp.jpg) 

## **4、限定符（查多少）**

例1：匹配连续11位数字

var  reg = /\d\d\d\d\d\d\d\d\d\d\d/gi;

![img](wpsD494.tmp.jpg) 

* ：0到多，等价于{0,}

+ ：1到多，等价于{1,}

？：0或1，等价于{0,1}

 

0-99之间的任意数字

① 匹配0-9  \d 或 [0-9]

② 10-99    [1-9]\d

![img](wpsD495.tmp.jpg) 

## **5、定位符****（****从****哪查）**

提出问题：使用正则表达式匹配手机号码

![img](wpsD496.tmp.jpg) 

[^0-9] ：匹配除0-9以外的任一字符

^1[3-9]\d{9}$ ：脱字节代表以数字1进行开始，$以数字字符进行结尾

 

例1：匹配手机号码

![img](wpsD4A6.tmp.jpg) 

例2：匹配字符串的an字符

![img](wpsD4A7.tmp.jpg) 

## **6、转义字符**

在正则表达式中，我们可以使用反斜杠对特殊字符进行转义操作。

![img](wpsD4A8.tmp.jpg) 

demo14_zhuanyi.html 示例代码：

![img](wpsD4A9.tmp.jpg) 

在正则表达式中，字符簇[]也具有转义功能，我们可以把以上特殊字符都放入[]中括号中，其会被当做普通字符进行处理。

## **7、选择****匹配符（****或者****）**

在正则表达式中，我们可以通过|来实现选择匹配符，要不选择|左边的内容，要不选择|右边的内容。

在正则表达式中，竖线|默认情况下，会把左边的内容当做一个整体，也会把右边的内容当做一个整体。

demo15_xuanze.html 示例代码：

![img](wpsD4AA.tmp.jpg) 

 

匹配0-99之间的任意数字：

0-9 ：\d

10-99 ：[1-9]\d

匹配0-99之间的任意数字：使用选择匹配符

![img](wpsD4AB.tmp.jpg) 

## **8、特殊****情况****1：****贪婪匹配与非贪婪匹配**

在正则表达式中，我们经常使用限定符来限定查询多少个字符。但是有一种情况特别特殊，如下所示：

![img](wpsD4AC.tmp.jpg) 

如以上代码所示，在匹配QQ号时，从第2开始，最少匹配4位，最多匹配10。但是正则表达式默认采用“贪婪匹配”原则，能匹配多的，就不匹配少的。

哪些情况下会触发贪婪匹配：*（星号）、+（加号）、？（问号）、{n,}、{n,m}

 

有些情况下，我们可能并不需要贪婪匹配，而需要非贪婪匹配，我们可以在限定符的后面添加一个问号，用于限制贪婪匹配原则。我们把这种能匹配少的就不匹配多的情况就称之为“非贪婪匹配”。

![img](wpsD4AD.tmp.jpg) 

## **9、特殊****情况****2：匹配****内容但不捕获**

在正则表达式中我们可以在子表达式中添加一个?:就代表只匹配内容，但是子表达式不捕获内容，结合exec方法。

 

例1：exec方法与子表达式的关系

![img](wpsD4AE.tmp.jpg) 

运行结果：

![img](wpsD4AF.tmp.jpg) 

当第一次循环时，系统会把\d\d\d所匹配到的结果(123)放入row[0]数组元素中，把第一个子表达式的内容2放入row[1]的数组元素中，第二个子表达式的结果3放入row[2]的索引元素中。

当第二次循环时，系统会把\d\d\d所匹配到的结果(345)放入row[0]数组元素中，把第一个子表达式的内容4放入row[1]的数组元素中，第二个子表达式的结果5放入row[2]的索引元素中。

所以由此可知，默认情况下，exec方法如果与子表达式结合，就返回的数据就会同时拥有多个元素，正则表达式匹配到的结果放入row[0]，第一个子表达式的内容放入row[1]...第n个子表达式的内容放入row[n]

有些情况下，我们可能并不需要子表达式的捕获功能，我们就可以使用?:来解决。

![img](wpsD4B0.tmp.jpg) 

## **10、综合****案例：匹配****126邮箱****正则**

![img](wpsD4B1.tmp.jpg) 
